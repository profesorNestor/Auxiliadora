<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portal Educativo Mar√≠a Auxiliadora - Cartago Valle</title>
    <link rel="icon" type="image/png" href="images/favicon.ico">
    <style>
        :root {
            --azul-institucional: #1e40af;
            --azul-claro: #3b82f6;
            --rojo-institucional: #dc2626;
            --amarillo-institucional: #fbbf24;
            --verde-institucional: #16a34a;
            --blanco: #ffffff;
            --gris-claro: #f8fafc;
            --gris-oscuro: #334155;
            --sombra: 0 4px 20px rgba(0,0,0,0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--azul-institucional) 0%, var(--azul-claro) 100%);
            min-height: 100vh;
            color: var(--gris-oscuro);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: var(--blanco);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: var(--sombra);
            text-align: center;
        }

        .logo-section {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .logo-container {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 4px solid var(--amarillo-institucional);
            box-shadow: var(--sombra);
            transition: transform 0.3s ease;
            overflow: hidden;
            background: var(--blanco);
            position: relative;
        }

        .logo-container:hover {
            transform: scale(1.05);
        }

        .logo-container img {
            width: 90%;
            height: 90%;
            object-fit: contain;
            border-radius: 50%;
        }

        .logo-placeholder {
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, var(--azul-institucional), var(--azul-claro));
            border-radius: 50%;
            display: none;
            align-items: center;
            justify-content: center;
            color: var(--blanco);
            font-size: 24px;
            font-weight: bold;
        }

        .title {
            color: var(--azul-institucional);
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .subtitle {
            color: var(--gris-oscuro);
            font-size: 1.2rem;
            font-weight: 300;
        }

        .motto {
            background: linear-gradient(45deg, var(--amarillo-institucional), var(--rojo-institucional));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: bold;
            margin-top: 10px;
            font-size: 1.1rem;
        }

        .login-section {
            background: var(--blanco);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: var(--sombra);
        }

        .login-form {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            align-items: end;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--azul-institucional);
        }

        select, input[type="password"], input[type="text"] {
            width: 100%;
            padding: 12px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        select:focus, input:focus {
            outline: none;
            border-color: var(--azul-claro);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .login-btn {
            background: linear-gradient(45deg, var(--verde-institucional), var(--azul-claro));
            color: var(--blanco);
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            height: fit-content;
        }

        .login-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(22, 163, 74, 0.3);
        }

        .main-content {
            display: none;
            background: var(--blanco);
            border-radius: 15px;
            padding: 30px;
            box-shadow: var(--sombra);
        }

        .user-info {
            background: linear-gradient(45deg, var(--azul-institucional), var(--azul-claro));
            color: var(--blanco);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
        }

        .logout-btn {
            background: var(--rojo-institucional);
            color: var(--blanco);
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: background 0.3s ease;
        }

        .logout-btn:hover {
            background: #b91c1c;
        }

        .section-title {
            color: var(--azul-institucional);
            font-size: 1.8rem;
            font-weight: bold;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid var(--amarillo-institucional);
        }

        .api-config {
            background: linear-gradient(135deg, #fef3c7, #fde68a);
            border: 2px solid var(--amarillo-institucional);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 30px;
        }

        .api-config h3 {
            color: #92400e;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .api-form {
            display: grid;
            grid-template-columns: 200px 1fr;
            gap: 15px;
            align-items: center;
        }

        .api-input {
            padding: 12px;
            border: 2px solid #d1d5db;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        .api-input:focus {
            border-color: var(--azul-claro);
            outline: none;
        }

        .resources-section {
            margin-bottom: 30px;
        }

        .resources-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .resource-card {
            background: var(--gris-claro);
            border: 3px solid #e2e8f0;
            border-radius: 12px;
            padding: 25px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .resource-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(59, 130, 246, 0.1), transparent);
            transition: left 0.5s ease;
        }

        .resource-card:hover::before {
            left: 100%;
        }

        .resource-card:hover {
            border-color: var(--azul-claro);
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.2);
        }

        .resource-card.selected {
            background: linear-gradient(135deg, var(--azul-claro), var(--azul-institucional));
            color: var(--blanco);
            border-color: var(--amarillo-institucional);
            transform: translateY(-3px);
        }

        .resource-card h3 {
            font-size: 1.3rem;
            margin-bottom: 10px;
        }

        .resource-card p {
            font-size: 0.95rem;
            opacity: 0.8;
        }

        .chat-interface {
            border: 2px solid #e2e8f0;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: var(--sombra);
        }

        .chat-header {
            background: linear-gradient(45deg, var(--azul-institucional), var(--azul-claro));
            color: var(--blanco);
            padding: 20px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .chat-messages {
            height: 450px;
            overflow-y: auto;
            padding: 20px;
            background: var(--gris-claro);
        }

        .message {
            margin-bottom: 20px;
            padding: 15px;
            border-radius: 12px;
            max-width: 85%;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .message.user {
            background: linear-gradient(135deg, var(--azul-claro), var(--azul-institucional));
            color: var(--blanco);
            margin-left: auto;
            border-bottom-right-radius: 4px;
        }

        .message.assistant {
            background: var(--blanco);
            border: 2px solid #e2e8f0;
            border-bottom-left-radius: 4px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .chat-input-area {
            padding: 20px;
            background: var(--blanco);
            border-top: 2px solid #e2e8f0;
        }

        .input-container {
            display: flex;
            gap: 15px;
            align-items: end;
        }

        .chat-input {
            flex: 1;
            padding: 15px;
            border: 2px solid #e2e8f0;
            border-radius: 25px;
            font-size: 16px;
            resize: none;
            min-height: 50px;
            max-height: 120px;
            transition: border-color 0.3s ease;
        }

        .chat-input:focus {
            outline: none;
            border-color: var(--azul-claro);
        }

        .send-btn {
            background: linear-gradient(45deg, var(--verde-institucional), var(--azul-claro));
            color: var(--blanco);
            border: none;
            padding: 15px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            min-width: 100px;
        }

        .send-btn:hover:not(:disabled) {
            transform: scale(1.05);
            box-shadow: 0 4px 15px rgba(22, 163, 74, 0.3);
        }

        .send-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid var(--azul-claro);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .login-help {
            background: linear-gradient(135deg, var(--gris-claro), #e2e8f0);
            border: 2px solid #cbd5e1;
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
            text-align: center;
        }

        .login-help h4 {
            color: var(--azul-institucional);
            margin-bottom: 10px;
        }

        .login-help p {
            margin: 8px 0;
            color: var(--gris-oscuro);
        }

        .login-help strong {
            color: var(--azul-institucional);
        }

        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }

        .status-connected {
            background: var(--verde-institucional);
            box-shadow: 0 0 5px rgba(22, 163, 74, 0.5);
        }

        .status-disconnected {
            background: var(--rojo-institucional);
        }

        .error-message {
            background: linear-gradient(135deg, #fef2f2, #fee2e2);
            color: var(--rojo-institucional);
            border: 2px solid #fca5a5;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            font-weight: 500;
        }

        .success-message {
            background: linear-gradient(135deg, #dcfce7, #bbf7d0);
            color: var(--verde-institucional);
            border: 2px solid #86efac;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            font-weight: 500;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .title {
                font-size: 2rem;
            }
            
            .logo-section {
                flex-direction: column;
                text-align: center;
            }
            
            .login-form {
                grid-template-columns: 1fr;
            }
            
            .api-form {
                grid-template-columns: 1fr;
            }
            
            .user-info {
                flex-direction: column;
                text-align: center;
            }
            
            .chat-input-area {
                padding: 15px;
            }
            
            .input-container {
                flex-direction: column;
                gap: 10px;
            }
            
            .send-btn {
                width: 100%;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 10px;
            }
            
            .header, .login-section, .main-content {
                padding: 20px;
            }
            
            .chat-messages {
                height: 300px;
            }
            
            .message {
                max-width: 95%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="logo-section">
                <div class="logo-container" id="logoContainer">
                    <img src="images/escudo-large.png" alt="Escudo Mar√≠a Auxiliadora" id="logoImage" onerror="showFallbackLogo()">
                    <div class="logo-placeholder" id="logoFallback">MA</div>
                </div>
                <div>
                    <h1 class="title">Instituci√≥n Educativa Mar√≠a Auxiliadora</h1>
                    <p class="subtitle">Cartago, Valle del Cauca</p>
                    <p class="motto">VIRTUD - CIENCIA</p>
                </div>
            </div>
        </header>

        <div class="login-section" id="loginSection">
            <h2 class="section-title">üîê Acceso al Portal Educativo</h2>
            <form class="login-form" id="loginForm">
                <div class="form-group">
                    <label for="userType">üë§ Tipo de Usuario:</label>
                    <select id="userType" required>
                        <option value="">Seleccionar tipo de usuario...</option>
                        <option value="educador">üë®‚Äçüè´ Educador (Docentes, Coordinadores, Rector)</option>
                        <option value="administrador">‚öôÔ∏è Administrador del Sistema</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="password">üîë Contrase√±a:</label>
                    <input type="password" id="password" required placeholder="Ingrese su contrase√±a">
                </div>
                <div class="form-group">
                    <button type="submit" class="login-btn">üöÄ Ingresar al Portal</button>
                </div>
            </form>
            
            <div class="login-help">
                <h4>üí° Credenciales de Acceso</h4>
                <p><strong>Educadores:</strong> educador2024</p>
                <p><strong>Administrador:</strong> admin2024</p>
                <p style="font-size: 0.9rem; margin-top: 10px; opacity: 0.7;">
                    * En un entorno real, cada usuario tendr√≠a credenciales √∫nicas
                </p>
            </div>
        </div>

        <main class="main-content" id="mainContent">
            <div class="user-info" id="userInfo">
                <div>
                    <span id="welcomeMessage"></span>
                    <div style="font-size: 0.9rem; opacity: 0.9; margin-top: 5px;" id="userDetails"></div>
                </div>
                <button class="logout-btn" onclick="logout()">üö™ Cerrar Sesi√≥n</button>
                <button onclick="getSystemStatistics()" style="background: var(--azul-claro); color: white; border: none; padding: 8px 16px; border-radius: 6px; cursor: pointer; font-size: 14px; margin-left: 10px;">üìä Estad√≠sticas</button>
                <button onclick="generateSystemReport()" style="background: var(--verde-institucional); color: white; border: none; padding: 8px 16px; border-radius: 6px; cursor: pointer; font-size: 14px; margin-left: 5px;">üìã Reporte</button>
            </div>

            <div class="api-config">
                <h3>ü§ñ Configuraci√≥n de IA</h3>
                <p style="color: #92400e; margin-bottom: 15px; font-size: 0.95rem;">
                    Configure su API Key para activar el asistente educativo inteligente
                </p>
                    <div class="api-form">
                        <label for="apiProvider">Proveedor de IA:</label>
                        <select id="apiProvider" class="api-input" onchange="saveConfiguration()">
                            <option value="openai">üß† OpenAI (ChatGPT)</option>
                            <option value="google">üîÆ Google (Gemini)</option>
                            <option value="mistral">‚ö° Mistral AI</option>
                        </select>
                        
                        <label for="apiKey">API Key:</label>
                        <input type="password" id="apiKey" class="api-input" placeholder="Ingrese su API Key aqu√≠..." onchange="saveConfiguration()">
                        
                        <label>Acciones:</label>
                        <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                            <button onclick="saveConfiguration()" style="padding: 8px 16px; background: var(--verde-institucional); color: white; border: none; border-radius: 6px; cursor: pointer;">üíæ Guardar</button>
                            <button onclick="exportConfiguration()" style="padding: 8px 16px; background: var(--azul-claro); color: white; border: none; border-radius: 6px; cursor: pointer;">üì• Exportar</button>
                            <button onclick="importConfiguration()" style="padding: 8px 16px; background: var(--amarillo-institucional); color: var(--gris-oscuro); border: none; border-radius: 6px; cursor: pointer;">üìÇ Importar</button>
                            <button onclick="resetConfiguration()" style="padding: 8px 16px; background: var(--rojo-institucional); color: white; border: none; border-radius: 6px; cursor: pointer;">üîÑ Restablecer</button>
                        </div>
                    </div>
            </div>

            <section class="resources-section">
                <h2 class="section-title">üìö Recursos Institucionales</h2>
                <p style="margin-bottom: 20px; color: var(--gris-oscuro);">
                    Seleccione los recursos sobre los cuales desea realizar consultas
                </p>
                <div class="resources-grid" id="resourcesGrid">
                    <div class="resource-card" data-resource="manual">
                        <h3>üìã Manual de Convivencia</h3>
                        <p>Normativas, derechos, deberes y procedimientos disciplinarios</p>
                    </div>
                    <div class="resource-card" data-resource="pei">
                        <h3>üéØ Proyecto Educativo Institucional</h3>
                        <p>Misi√≥n, visi√≥n, filosof√≠a y lineamientos pedag√≥gicos</p>
                    </div>
                    <div class="resource-card" data-resource="calendario">
                        <h3>üìÖ Calendario Escolar</h3>
                        <p>Cronograma acad√©mico, festividades y evaluaciones</p>
                    </div>
                    <div class="resource-card" data-resource="legislacion">
                        <h3>‚öñÔ∏è Legislaci√≥n Educativa</h3>
                        <p>Normativas MEN, decretos y resoluciones vigentes</p>
                    </div>
                    <div class="resource-card" data-resource="planes">
                        <h3>üìä Planes de Estudio</h3>
                        <p>Curr√≠culos, competencias y metodolog√≠as por √°rea</p>
                    </div>
                    <div class="resource-card" data-resource="procedimientos">
                        <h3>üîÑ Procedimientos</h3>
                        <p>Procesos administrativos, acad√©micos y de bienestar</p>
                    </div>
                </div>
            </section>

            <section class="chat-section">
                <h2 class="section-title">ü§ñ Consultor Educativo IA</h2>
                <div class="chat-interface">
                    <div class="chat-header">
                        <span class="status-indicator" id="statusIndicator"></span>
                        <span id="chatStatus">Configurando sistema...</span>
                    </div>
                    <div class="chat-messages" id="chatMessages">
                        <div class="message assistant">
                            <strong>ü§ñ Asistente IA:</strong> ¬°Bienvenido al Portal Educativo de la Instituci√≥n Mar√≠a Auxiliadora! 
                            <br><br>
                            Soy su consultor educativo inteligente. Puedo ayudarle con:
                            <br>
                            ‚Ä¢ üìã Consultas sobre el Manual de Convivencia
                            <br>
                            ‚Ä¢ üéØ Informaci√≥n del PEI y filosof√≠a institucional
                            <br>
                            ‚Ä¢ üìÖ Fechas y eventos del calendario escolar
                            <br>
                            ‚Ä¢ ‚öñÔ∏è Normativas y legislaci√≥n educativa
                            <br>
                            ‚Ä¢ üìä Planes de estudio y metodolog√≠as
                            <br>
                            ‚Ä¢ üîÑ Procedimientos administrativos
                            <br><br>
                            <strong>Para comenzar:</strong>
                            <br>
                            1Ô∏è‚É£ Configure su API Key arriba
                            <br>
                            2Ô∏è‚É£ Seleccione uno o m√°s recursos
                            <br>
                            3Ô∏è‚É£ Realice su consulta
                        </div>
                    </div>
                    <div class="chat-input-area">
                        <div class="input-container">
                            <textarea 
                                id="chatInput" 
                                class="chat-input" 
                                placeholder="Escriba su consulta sobre los recursos institucionales..."
                                rows="2"
                            ></textarea>
                            <button id="sendBtn" class="send-btn" onclick="sendMessage()">
                                üì§ Enviar
                            </button>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script>
        // Configuraci√≥n global
        const CONFIG = {
            users: {
                educador: {
                    password: 'educador2024',
                    name: 'Educador',
                    description: 'Personal Docente y Directivo'
                },
                administrador: {
                    password: 'admin2024',
                    name: 'Administrador del Sistema',
                    description: 'Gesti√≥n T√©cnica'
                }
            },
            aiProviders: {
                openai: {
                    name: 'OpenAI',
                    baseUrl: 'https://api.openai.com/v1/chat/completions',
                    model: 'gpt-3.5-turbo'
                },
                google: {
                    name: 'Google',
                    baseUrl: 'https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-latest:generateContent',
                    model: 'gemini-1.5-flash-latest'
                },
                mistral: {
                    name: 'Mistral',
                    baseUrl: 'https://api.mistral.ai/v1/chat/completions',
                    model: 'mistral-medium'
                }
            }
        };

        // Estado de la aplicaci√≥n
        let currentUser = null;
        let selectedResources = [];
        let isLoading = false;

        // Funci√≥n para manejar el fallback del logo
        function showFallbackLogo() {
            const logoImage = document.getElementById('logoImage');
            const logoFallback = document.getElementById('logoFallback');
            
            if (logoImage) logoImage.style.display = 'none';
            if (logoFallback) logoFallback.style.display = 'flex';
            
            console.log('üé® Logo fallback activado - Imagen no encontrada');
        }

        // Funci√≥n para intentar cargar diferentes versiones del logo
        function tryLoadLogo() {
            const logoImages = [
                'images/escudo-large.png',
                'images/escudo-maria-auxiliadora.png',
                'images/escudo-small.png',
                'images/favicon.ico'
            ];
            
            let currentImageIndex = 0;
            const logoImg = document.getElementById('logoImage');
            
            function loadNextImage() {
                if (currentImageIndex < logoImages.length) {
                    logoImg.src = logoImages[currentImageIndex];
                    logoImg.onload = function() {
                        console.log('‚úÖ Logo cargado:', logoImages[currentImageIndex]);
                    };
                    logoImg.onerror = function() {
                        currentImageIndex++;
                        if (currentImageIndex < logoImages.length) {
                            loadNextImage();
                        } else {
                            showFallbackLogo();
                        }
                    };
                } else {
                    showFallbackLogo();
                }
            }
            
            loadNextImage();
        }

        // Inicializaci√≥n
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üöÄ Inicializando Portal Mar√≠a Auxiliadora...');
            initializeApp();
            tryLoadLogo();
        });

        function initializeApp() {
            setupEventListeners();
            updateChatStatus();
            console.log('‚úÖ Portal inicializado correctamente');
        }

        function setupEventListeners() {
            // Login form
            document.getElementById('loginForm').addEventListener('submit', handleLogin);

            // Chat input
            const chatInput = document.getElementById('chatInput');
            chatInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    sendMessage();
                }
            });

            // Auto-resize textarea
            chatInput.addEventListener('input', function() {
                this.style.height = 'auto';
                this.style.height = this.scrollHeight + 'px';
            });

            // API configuration changes
            document.getElementById('apiKey').addEventListener('input', updateChatStatus);
            document.getElementById('apiProvider').addEventListener('change', updateChatStatus);

            // Resource selection
            document.getElementById('resourcesGrid').addEventListener('click', function(e) {
                const card = e.target.closest('.resource-card');
                if (card) {
                    toggleResourceSelection(card);
                }
            });
        }

        function handleLogin(e) {
            e.preventDefault();
            
            const userType = document.getElementById('userType').value;
            const password = document.getElementById('password').value;

            if (!userType) {
                showMessage('Por favor seleccione el tipo de usuario.', 'error');
                return;
            }

            const credentials = CONFIG.users[userType];
            
            if (credentials && password === credentials.password) {
                currentUser = { 
                    type: userType, 
                    name: credentials.name,
                    description: credentials.description
                };
                
                showMainContent();
                console.log('‚úÖ Login exitoso:', currentUser);
            } else {
                showMessage(`Contrase√±a incorrecta para ${credentials ? credentials.name : 'el tipo de usuario seleccionado'}.`, 'error');
            }
        }

        function showMainContent() {
            document.getElementById('loginSection').style.display = 'none';
            document.getElementById('mainContent').style.display = 'block';
            
            const welcomeMsg = document.getElementById('welcomeMessage');
            const userDetails = document.getElementById('userDetails');
            
            welcomeMsg.textContent = `¬°Bienvenido(a), ${currentUser.name}!`;
            userDetails.textContent = currentUser.description;
            
            // Registrar inicio de sesi√≥n
            sessionStorage.setItem('sessionStart', new Date().toISOString());
            logActivity('LOGIN', { userType: currentUser.type });
            
            // Habilitar funciones espec√≠ficas del usuario
            handleUserSpecificFeatures();
            
            // Cargar configuraci√≥n guardada
            setTimeout(() => {
                loadConfiguration();
            }, 500);
            
            updateChatStatus();
        }

        function logout() {
            // Registrar cierre de sesi√≥n
            if (currentUser) {
                logActivity('LOGOUT', { 
                    sessionDuration: Date.now() - new Date(sessionStorage.getItem('sessionStart')).getTime()
                });
            }
            
            currentUser = null;
            selectedResources = [];
            
            document.getElementById('loginSection').style.display = 'block';
            document.getElementById('mainContent').style.display = 'none';
            
            // Reset form
            document.getElementById('userType').value = '';
            document.getElementById('password').value = '';
            document.getElementById('apiKey').value = '';
            
            // Reset resources
            document.querySelectorAll('.resource-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            // Reset chat
            resetChat();
            
            // Limpiar session storage pero mantener localStorage para configuraciones
            sessionStorage.clear();
            
            console.log('üö™ Sesi√≥n cerrada');
        }

        function toggleResourceSelection(card) {
            const resource = card.dataset.resource;
            
            card.classList.toggle('selected');
            
            if (selectedResources.includes(resource)) {
                selectedResources = selectedResources.filter(r => r !== resource);
                logActivity('RESOURCE_DESELECTED', { resource });
            } else {
                selectedResources.push(resource);
                logActivity('RESOURCE_SELECTED', { resource });
            }
            
            updateChatStatus();
            
            // Auto-guardar configuraci√≥n
            setTimeout(saveConfiguration, 1000);
            
            console.log('üìö Recursos seleccionados:', selectedResources);
        }

        function updateChatStatus() {
            const apiKey = document.getElementById('apiKey').value;
            const provider = document.getElementById('apiProvider').value;
            const statusElement = document.getElementById('chatStatus');
            const statusIndicator = document.getElementById('statusIndicator');
            
            statusIndicator.className = 'status-indicator';
            
            if (!apiKey.trim()) {
                statusElement.textContent = 'Configure su API Key para comenzar';
                statusIndicator.classList.add('status-disconnected');
            } else if (selectedResources.length === 0) {
                statusElement.textContent = 'Seleccione uno o m√°s recursos para consultar';
                statusIndicator.classList.add('status-disconnected');
            } else {
                const providerName = CONFIG.aiProviders[provider].name;
                statusElement.textContent = `‚úÖ Listo - ${providerName} | Recursos: ${selectedResources.length}`;
                statusIndicator.classList.add('status-connected');
            }
        }

        async function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            
            if (!message || isLoading) return;
            
            const apiKey = document.getElementById('apiKey').value;
            const provider = document.getElementById('apiProvider').value;
            
            // Validaciones
            if (!apiKey.trim()) {
                showMessage('Por favor configure una API Key para continuar.', 'error');
                return;
            }
            
            if (selectedResources.length === 0) {
                showMessage('Por favor seleccione al menos un recurso para consultar.', 'error');
                return;
            }

            // Preparar UI para env√≠o
            isLoading = true;
            input.value = '';
            const sendBtn = document.getElementById('sendBtn');
            sendBtn.disabled = true;
            sendBtn.innerHTML = '<span class="loading"></span> Enviando...';

            // Agregar mensaje del usuario
            addMessage(message, 'user');
            
            // Registrar consulta
            logActivity('AI_QUERY', { 
                provider, 
                resourcesUsed: selectedResources.length,
                queryLength: message.length 
            });

            try {
                const response = await callAI(message, apiKey);
                addMessage(response, 'assistant');
                
                // Registrar respuesta exitosa
                logActivity('AI_RESPONSE_SUCCESS', { 
                    provider,
                    responseLength: response.length 
                });
                
            } catch (error) {
                console.error('Error calling AI:', error);
                addMessage(`‚ùå Error: ${error.message}`, 'assistant');
                
                // Registrar error
                logActivity('AI_RESPONSE_ERROR', { 
                    provider,
                    error: error.message 
                });
            } finally {
                // Restaurar UI
                isLoading = false;
                sendBtn.disabled = false;
                sendBtn.innerHTML = 'üì§ Enviar';
            }
        }

        function addMessage(content, sender) {
            const messagesContainer = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}`;
            
            const timestamp = new Date().toLocaleTimeString();
            
            if (sender === 'user') {
                messageDiv.innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: start;">
                        <div><strong>üë§ T√∫:</strong> ${content}</div>
                        <small style="opacity: 0.7; margin-left: 10px;">${timestamp}</small>
                    </div>
                `;
            } else {
                messageDiv.innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: start;">
                        <div><strong>ü§ñ Asistente IA:</strong> ${content}</div>
                        <small style="opacity: 0.7; margin-left: 10px;">${timestamp}</small>
                    </div>
                `;
            }
            
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        async function callAI(message, apiKey) {
            const provider = document.getElementById('apiProvider').value;
            const providerConfig = CONFIG.aiProviders[provider];
            
            if (!providerConfig) {
                throw new Error(`Proveedor ${provider} no soportado`);
            }

            const context = `Eres un asistente educativo especializado en la Instituci√≥n Educativa Mar√≠a Auxiliadora de Cartago, Valle del Cauca. 
            
Informaci√≥n institucional:
- Instituci√≥n: Mar√≠a Auxiliadora
- Ubicaci√≥n: Cartago, Valle del Cauca, Colombia
- Lema: "VIRTUD - CIENCIA"
- Enfoque: Formaci√≥n integral cat√≥lica salesiana

El usuario est√° consultando sobre: ${selectedResources.join(', ')}.

Responde de manera profesional, c√°lida y educativa. Si no tienes informaci√≥n espec√≠fica sobre el colegio, proporciona orientaci√≥n general √∫til para instituciones educativas cat√≥licas salesianas. Mant√©n un tono respetuoso y pedag√≥gico.`;

            try {
                let response;
                
                switch(provider) {
                    case 'openai':
                        response = await fetch(providerConfig.baseUrl, {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                                'Authorization': `Bearer ${apiKey}`
                            },
                            body: JSON.stringify({
                                model: providerConfig.model,
                                messages: [
                                    { role: 'system', content: context },
                                    { role: 'user', content: message }
                                ],
                                max_tokens: 800,
                                temperature: 0.7
                            })
                        });
                        break;
                        
                    case 'google':
                        response = await fetch(`${providerConfig.baseUrl}?key=${apiKey}`, {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify({
                                contents: [{
                                    parts: [{ text: `${context}\n\nPregunta del usuario: ${message}` }]
                                }],
                                generationConfig: {
                                    maxOutputTokens: 800,
                                    temperature: 0.7
                                }
                            })
                        });
                        break;
                        
                    case 'mistral':
                        response = await fetch(providerConfig.baseUrl, {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                                'Authorization': `Bearer ${apiKey}`
                            },
                            body: JSON.stringify({
                                model: providerConfig.model,
                                messages: [
                                    { role: 'system', content: context },
                                    { role: 'user', content: message }
                                ],
                                max_tokens: 800,
                                temperature: 0.7
                            })
                        });
                        break;
                        
                    default:
                        throw new Error(`Proveedor ${provider} no implementado`);
                }

                if (!response.ok) {
                    const errorData = await response.json().catch(() => ({}));
                    throw new Error(`Error ${response.status}: ${errorData.error?.message || response.statusText}`);
                }

                const data = await response.json();
                
                // Extraer respuesta seg√∫n el proveedor
                switch(provider) {
                    case 'openai':
                    case 'mistral':
                        if (!data.choices || !data.choices[0]) {
                            throw new Error('Respuesta inv√°lida del servidor');
                        }
                        return data.choices[0].message.content;
                        
                    case 'google':
                        if (!data.candidates || !data.candidates[0]) {
                            throw new Error('Respuesta inv√°lida del servidor');
                        }
                        return data.candidates[0].content.parts[0].text;
                        
                    default:
                        throw new Error('Proveedor no soportado');
                }
                
            } catch (error) {
                if (error.message.includes('API key')) {
                    throw new Error('API Key inv√°lida o sin permisos. Verifique su clave.');
                } else if (error.message.includes('quota')) {
                    throw new Error('L√≠mite de API alcanzado. Intente m√°s tarde.');
                } else if (error.message.includes('network') || error.name === 'TypeError') {
                    throw new Error('Error de conexi√≥n. Verifique su conexi√≥n a internet.');
                } else {
                    throw new Error(`Error de ${providerConfig.name}: ${error.message}`);
                }
            }
        }

        function showMessage(message, type = 'info') {
            // Crear elemento de mensaje
            const messageDiv = document.createElement('div');
            messageDiv.className = `${type}-message`;
            messageDiv.innerHTML = `
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <span>${message}</span>
                    <button onclick="this.parentElement.parentElement.remove()" 
                            style="background: none; border: none; color: inherit; cursor: pointer; font-size: 18px;">√ó</button>
                </div>
            `;
            
            // Insertar en el contenedor principal
            const mainContent = document.getElementById('mainContent');
            if (mainContent && mainContent.style.display !== 'none') {
                mainContent.insertBefore(messageDiv, mainContent.firstChild);
            } else {
                // Fallback para cuando no est√° en main content
                alert(message);
                return;
            }
            
            // Auto-remove despu√©s de 5 segundos
            setTimeout(() => {
                if (messageDiv.parentNode) {
                    messageDiv.remove();
                }
            }, 5000);
        }

        function resetChat() {
            const chatMessages = document.getElementById('chatMessages');
            chatMessages.innerHTML = `
                <div class="message assistant">
                    <strong>ü§ñ Asistente IA:</strong> ¬°Bienvenido al Portal Educativo de la Instituci√≥n Mar√≠a Auxiliadora! 
                    <br><br>
                    Soy su consultor educativo inteligente. Puedo ayudarle con:
                    <br>
                    ‚Ä¢ üìã Consultas sobre el Manual de Convivencia
                    <br>
                    ‚Ä¢ üéØ Informaci√≥n del PEI y filosof√≠a institucional
                    <br>
                    ‚Ä¢ üìÖ Fechas y eventos del calendario escolar
                    <br>
                    ‚Ä¢ ‚öñÔ∏è Normativas y legislaci√≥n educativa
                    <br>
                    ‚Ä¢ üìä Planes de estudio y metodolog√≠as
                    <br>
                    ‚Ä¢ üîÑ Procedimientos administrativos
                    <br><br>
                    <strong>Para comenzar:</strong>
                    <br>
                    1Ô∏è‚É£ Configure su API Key arriba
                    <br>
                    2Ô∏è‚É£ Seleccione uno o m√°s recursos
                    <br>
                    3Ô∏è‚É£ Realice su consulta
                </div>
            `;
        }

        // FUNCIONES DE UTILIDAD Y DEBUGGING

        function validateApiKey(provider, key) {
            const patterns = {
                openai: /^sk-[a-zA-Z0-9]{48,}$/,
                google: /^AIza[a-zA-Z0-9_-]{35}$/,
                mistral: /^[a-zA-Z0-9]{32}$/
            };
            return patterns[provider] ? patterns[provider].test(key) : key.length > 10;
        }

        // FUNCIONES DE GUARDADO Y CONFIGURACI√ìN
        function saveConfiguration() {
            const config = {
                apiProvider: document.getElementById('apiProvider').value,
                apiKey: document.getElementById('apiKey').value,
                selectedResources: selectedResources,
                timestamp: new Date().toISOString()
            };
            
            // Guardar en localStorage para persistencia
            localStorage.setItem('mariaAuxiliadoraConfig', JSON.stringify(config));
            showMessage('‚úÖ Configuraci√≥n guardada exitosamente', 'success');
            console.log('üíæ Configuraci√≥n guardada:', config);
        }

        function loadConfiguration() {
            try {
                const savedConfig = localStorage.getItem('mariaAuxiliadoraConfig');
                if (savedConfig) {
                    const config = JSON.parse(savedConfig);
                    
                    // Restaurar configuraci√≥n de API
                    if (config.apiProvider) {
                        document.getElementById('apiProvider').value = config.apiProvider;
                    }
                    if (config.apiKey) {
                        document.getElementById('apiKey').value = config.apiKey;
                    }
                    
                    // Restaurar recursos seleccionados
                    if (config.selectedResources && Array.isArray(config.selectedResources)) {
                        selectedResources = [...config.selectedResources];
                        // Marcar visualmente los recursos seleccionados
                        selectedResources.forEach(resourceId => {
                            const card = document.querySelector(`[data-resource="${resourceId}"]`);
                            if (card) {
                                card.classList.add('selected');
                            }
                        });
                    }
                    
                    updateChatStatus();
                    console.log('üìÇ Configuraci√≥n cargada:', config);
                    showMessage('üìÇ Configuraci√≥n anterior restaurada', 'success');
                }
            } catch (error) {
                console.warn('‚ö†Ô∏è Error cargando configuraci√≥n:', error);
            }
        }

        function exportConfiguration() {
            const config = {
                userType: currentUser?.type,
                apiProvider: document.getElementById('apiProvider').value,
                selectedResources: selectedResources,
                exportDate: new Date().toISOString(),
                portalVersion: '2.0'
            };
            
            const configJSON = JSON.stringify(config, null, 2);
            const blob = new Blob([configJSON], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `maria-auxiliadora-config-${new Date().toISOString().split('T')[0]}.json`;
            a.click();
            URL.revokeObjectURL(url);
            
            showMessage('üì• Configuraci√≥n exportada exitosamente', 'success');
            console.log('üì§ Configuraci√≥n exportada:', config);
        }

        function importConfiguration() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            input.onchange = function(e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        try {
                            const config = JSON.parse(e.target.result);
                            
                            // Validar estructura del archivo
                            if (config.apiProvider && config.selectedResources) {
                                // Aplicar configuraci√≥n
                                document.getElementById('apiProvider').value = config.apiProvider;
                                selectedResources = config.selectedResources || [];
                                
                                // Marcar recursos visualmente
                                document.querySelectorAll('.resource-card').forEach(card => {
                                    card.classList.remove('selected');
                                });
                                selectedResources.forEach(resourceId => {
                                    const card = document.querySelector(`[data-resource="${resourceId}"]`);
                                    if (card) {
                                        card.classList.add('selected');
                                    }
                                });
                                
                                updateChatStatus();
                                showMessage('üìÇ Configuraci√≥n importada exitosamente', 'success');
                                console.log('üì• Configuraci√≥n importada:', config);
                            } else {
                                throw new Error('Formato de archivo inv√°lido');
                            }
                        } catch (error) {
                            showMessage('‚ùå Error al importar configuraci√≥n: ' + error.message, 'error');
                            console.error('Error importing config:', error);
                        }
                    };
                    reader.readAsText(file);
                }
            };
            input.click();
        }

        function resetConfiguration() {
            if (confirm('¬øEst√° seguro de restablecer toda la configuraci√≥n? Esta acci√≥n no se puede deshacer.')) {
                // Limpiar localStorage
                localStorage.removeItem('mariaAuxiliadoraConfig');
                
                // Resetear formularios
                document.getElementById('apiProvider').selectedIndex = 0;
                document.getElementById('apiKey').value = '';
                
                // Limpiar recursos seleccionados
                selectedResources = [];
                document.querySelectorAll('.resource-card').forEach(card => {
                    card.classList.remove('selected');
                });
                
                // Resetear chat
                resetChat();
                updateChatStatus();
                
                showMessage('üîÑ Configuraci√≥n restablecida', 'success');
                console.log('üîÑ Configuraci√≥n restablecida completamente');
            }
        }

        // FUNCIONES PARA ADMINISTRADORES
        function getSystemStatistics() {
            const stats = {
                totalUsers: Object.keys(CONFIG.users).length,
                totalResources: document.querySelectorAll('.resource-card').length,
                selectedResources: selectedResources.length,
                currentProvider: document.getElementById('apiProvider').value,
                hasApiKey: !!document.getElementById('apiKey').value,
                sessionStart: sessionStorage.getItem('sessionStart') || new Date().toISOString(),
                lastActivity: new Date().toISOString()
            };
            
            console.log('üìä Estad√≠sticas del sistema:', stats);
            return stats;
        }

        function generateSystemReport() {
            const stats = getSystemStatistics();
            const report = `
REPORTE DEL SISTEMA - PORTAL MAR√çA AUXILIADORA
==============================================
Fecha: ${new Date().toLocaleString()}
Usuario actual: ${currentUser?.name || 'No autenticado'}
Tipo de usuario: ${currentUser?.type || 'N/A'}

CONFIGURACI√ìN:
- Proveedor de IA: ${stats.currentProvider}
- API Key configurada: ${stats.hasApiKey ? 'S√≠' : 'No'}
- Recursos seleccionados: ${stats.selectedResources}/${stats.totalResources}
- Recursos activos: ${selectedResources.join(', ') || 'Ninguno'}

SESI√ìN:
- Inicio de sesi√≥n: ${new Date(stats.sessionStart).toLocaleString()}
- √öltima actividad: ${new Date(stats.lastActivity).toLocaleString()}

SISTEMA:
- Usuarios disponibles: ${stats.totalUsers}
- Versi√≥n del portal: 2.0
- Estado: Operativo
==============================================
            `;
            
            const blob = new Blob([report], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `reporte-sistema-${new Date().toISOString().split('T')[0]}.txt`;
            a.click();
            URL.revokeObjectURL(url);
            
            showMessage('üìã Reporte del sistema generado', 'success');
        }

        // FUNCIONES ESPEC√çFICAS PARA DIFERENTES TIPOS DE USUARIO
        function handleUserSpecificFeatures() {
            if (!currentUser) return;
            
            // Caracter√≠sticas espec√≠ficas seg√∫n tipo de usuario
            switch(currentUser.type) {
                case 'administrador':
                    console.log('üîß Habilitando funciones de administrador');
                    // Los administradores pueden ver estad√≠sticas adicionales
                    sessionStorage.setItem('adminMode', 'true');
                    break;
                    
                case 'educador':
                    console.log('üë®‚Äçüè´ Habilitando funciones de educador');
                    // Los educadores tienen acceso completo a recursos pedag√≥gicos
                    sessionStorage.setItem('educatorMode', 'true');
                    break;
            }
            
            // Ambos tipos de usuario tienen las mismas funcionalidades en esta versi√≥n
            // pero esto permite escalabilidad futura
        }

        // FUNCIONES DE MONITOREO
        function logActivity(action, details = {}) {
            const activity = {
                timestamp: new Date().toISOString(),
                user: currentUser?.name || 'An√≥nimo',
                userType: currentUser?.type || 'N/A',
                action: action,
                details: details
            };
            
            // Guardar en sessionStorage para la sesi√≥n actual
            const activities = JSON.parse(sessionStorage.getItem('activities') || '[]');
            activities.push(activity);
            
            // Mantener solo las √∫ltimas 50 actividades
            if (activities.length > 50) {
                activities.splice(0, activities.length - 50);
            }
            
            sessionStorage.setItem('activities', JSON.stringify(activities));
            console.log('üìù Actividad registrada:', activity);
        }

        function getActivityLog() {
            return JSON.parse(sessionStorage.getItem('activities') || '[]');
        }

        // EVENT LISTENERS ADICIONALES
        function setupAdvancedEventListeners() {
            // Validaci√≥n en tiempo real de API Key
            const apiKeyInput = document.getElementById('apiKey');
            if (apiKeyInput) {
                apiKeyInput.addEventListener('paste', function(e) {
                    setTimeout(() => {
                        const provider = document.getElementById('apiProvider').value;
                        const key = this.value.trim();
                        if (key && !validateApiKey(provider, key)) {
                            showMessage('‚ö†Ô∏è Formato de API Key inv√°lido para este proveedor', 'error');
                        }
                    }, 100);
                });
            }

            // Keyboard shortcuts
            document.addEventListener('keydown', function(e) {
                // Ctrl + Enter para enviar mensaje
                if (e.ctrlKey && e.key === 'Enter') {
                    e.preventDefault();
                    sendMessage();
                }
                
                // Esc para limpiar chat
                const chatInput = document.getElementById('chatInput');
                if (e.key === 'Escape' && chatInput === document.activeElement) {
                    if (confirm('¬øDesea limpiar la conversaci√≥n actual?')) {
                        resetChat();
                        chatInput.value = '';
                    }
                }
            });
        }

        // FUNCIONES DE DEBUGGING MEJORADAS
        window.debugPortal = function() {
            console.log('=== DEBUG PORTAL MAR√çA AUXILIADORA ===');
            console.log('Current User:', currentUser);
            console.log('Selected Resources:', selectedResources);
            console.log('Is Loading:', isLoading);
            console.log('Config:', CONFIG);
            console.log('API Key Present:', !!document.getElementById('apiKey').value);
            console.log('Provider:', document.getElementById('apiProvider').value);
            console.log('Session Activities:', getActivityLog());
            console.log('System Stats:', getSystemStatistics());
            console.log('=====================================');
        };

        window.testConnection = async function() {
            const apiKey = document.getElementById('apiKey').value;
            const provider = document.getElementById('apiProvider').value;
            
            if (!apiKey) {
                console.log('‚ùå No API Key provided');
                showMessage('‚ùå Configure una API Key antes de probar la conexi√≥n', 'error');
                return;
            }
            
            console.log(`üß™ Testing connection to ${provider}...`);
            showMessage(`üß™ Probando conexi√≥n con ${CONFIG.aiProviders[provider].name}...`, 'info');
            
            try {
                const response = await callAI('Test de conexi√≥n - responde solo "Conexi√≥n exitosa"', apiKey);
                console.log('‚úÖ Connection successful!');
                console.log('Response:', response);
                showMessage('‚úÖ ¬°Conexi√≥n exitosa con la IA!', 'success');
                
                logActivity('CONNECTION_TEST_SUCCESS', { provider });
            } catch (error) {
                console.log('‚ùå Connection failed:', error.message);
                showMessage(`‚ùå Error de conexi√≥n: ${error.message}`, 'error');
                
                logActivity('CONNECTION_TEST_FAILED', { provider, error: error.message });
            }
        };

        window.showActivities = function() {
            const activities = getActivityLog();
            console.table(activities);
            
            if (activities.length === 0) {
                showMessage('üìù No hay actividades registradas en esta sesi√≥n', 'info');
            } else {
                showMessage(`üìù Se encontraron ${activities.length} actividades. Revisa la consola.`, 'info');
            }
        };

        window.clearActivities = function() {
            if (confirm('¬øDesea limpiar el registro de actividades de esta sesi√≥n?')) {
                sessionStorage.removeItem('activities');
                showMessage('üßπ Registro de actividades limpiado', 'success');
            }
        };

        // Debug de im√°genes
        console.log('üîç Verificando rutas de im√°genes...');
        const testImages = ['images/escudo-large.png', 'images/escudo-maria-auxiliadora.png', 'images/escudo-small.png'];
        testImages.forEach(src => {
            const img = new Image();
            img.onload = () => console.log('‚úÖ Imagen disponible:', src);
            img.onerror = () => console.log('‚ùå Error cargando:', src);
            img.src = src;
        });

        // INICIALIZACI√ìN FINAL
        console.log('üöÄ Portal Educativo Mar√≠a Auxiliadora - JavaScript cargado correctamente');
        console.log('üìñ Recursos disponibles:', Object.keys(CONFIG?.users || {}));
        console.log('ü§ñ Proveedores de IA:', Object.keys(CONFIG?.aiProviders || {}));
        
        // Configurar event listeners avanzados despu√©s de la carga inicial
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(setupAdvancedEventListeners, 1000);
        });
    </script>
</body>
</html>