<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portal Educativo María Auxiliadora - Cartago Valle</title>
    <link rel="icon" type="image/png" href="images/favicon.ico">
    <!-- Enlace al archivo CSS -->
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <!-- ================================================ -->
        <!-- HEADER: Logo y título institucional -->
        <!-- ================================================ -->
        <header class="header">
            <div class="logo-section">
                <div class="logo-container" id="logoContainer">
                    <img src="images/escudo-large.png" alt="Escudo María Auxiliadora" id="logoImage" onerror="setTimeout(function(){if(window.showFallbackLogo)window.showFallbackLogo()}, 100)">
                    <div class="logo-placeholder" id="logoFallback">MA</div>
                </div>
                <div>
                    <h1 class="title">Institución Educativa María Auxiliadora</h1>
                    <p class="subtitle">Cartago, Valle del Cauca</p>
                    <p class="motto">VIRTUD - CIENCIA</p>
                </div>
            </div>
        </header>

        <!-- ================================================ -->
        <!-- SECCIÓN DE LOGIN: Formulario de acceso -->
        <!-- ================================================ -->
        <div class="login-section" id="loginSection">
            <h2 class="section-title">🔐 Acceso al Portal Educativo</h2>
            <form class="login-form" id="loginForm">
                <div class="form-group">
                    <label for="userType">👤 Tipo de Usuario:</label>
                    <select id="userType" required>
                        <option value="">Seleccionar tipo de usuario...</option>
                        <option value="educador">👨‍🏫 Educador (Docentes, Coordinadores, Rector)</option>
                        <option value="administrador">⚙️ Administrador del Sistema</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="password">🔑 Contraseña:</label>
                    <input type="password" id="password" required placeholder="Ingrese su contraseña">
                </div>
                <div class="form-group">
                    <button type="submit" class="login-btn">🚀 Ingresar al Portal</button>
                </div>
            </form>
            
            <!-- Ayuda de credenciales -->
            <div class="login-help">
                <h4>💡 Credenciales de Acceso</h4>
                <p><strong>Educadores:</strong> educador2024</p>
                <p><strong>Administrador:</strong> admin2024</p>
                <p style="font-size: 0.9rem; margin-top: 10px; opacity: 0.7;">
                    * En un entorno real, cada usuario tendría credenciales únicas
                </p>
            </div>
        </div>

        <!-- ================================================ -->
        <!-- SECCIÓN PRINCIPAL: Portal completo (oculto inicialmente) -->
        <!-- ================================================ -->
        <main class="main-content" id="mainContent">
            <!-- Barra de información del usuario -->
            <div class="user-info" id="userInfo">
                <div>
                    <span id="welcomeMessage"></span>
                    <div style="font-size: 0.9rem; opacity: 0.9; margin-top: 5px;" id="userDetails"></div>
                </div>
                <div>
                    <button class="logout-btn" onclick="logout()">🚪 Cerrar Sesión</button>
                    <button onclick="getSystemStatistics()" class="action-btn action-btn-blue">📊 Estadísticas</button>
                    <button onclick="generateSystemReport()" class="action-btn action-btn-green">📋 Reporte</button>
                </div>
            </div>

            <!-- ================================================ -->
            <!-- CONFIGURACIÓN DE IA -->
            <!-- ================================================ -->
            <div class="api-config">
                <h3>🤖 Configuración de IA</h3>
                <p class="api-description">
                    Configure su API Key para activar el asistente educativo inteligente
                </p>
                <div class="api-form">
                    <label for="apiProvider">Proveedor de IA:</label>
                    <select id="apiProvider" class="api-input" onchange="saveConfiguration()">
                        <option value="mistral">⚡ Mistral AI</option>
                        <option value="openai">🧠 OpenAI (ChatGPT)</option>
                        <option value="google">🔮 Google (Gemini)</option>
                    </select>
                    
                    <label for="apiKey">API Key:</label>
                    <input type="password" id="apiKey" class="api-input" placeholder="Ingrese su API Key aquí..." onchange="saveConfiguration()">
                    
                    <label>Acciones:</label>
                    <div class="api-actions">
                        <button onclick="saveConfiguration()" class="config-btn config-btn-save">💾 Guardar</button>
                        <button onclick="exportConfiguration()" class="config-btn config-btn-export">📥 Exportar</button>
                        <button onclick="importConfiguration()" class="config-btn config-btn-import">📂 Importar</button>
                        <button onclick="resetConfiguration()" class="config-btn config-btn-reset">🔄 Restablecer</button>
                    </div>
                </div>
            </div>

            <!-- ================================================ -->
            <!-- RECURSOS INSTITUCIONALES -->
            <!-- ================================================ -->
            <section class="resources-section">
                <h2 class="section-title">📚 Recursos Institucionales</h2>
                <p class="resources-description">
                    Seleccione los recursos sobre los cuales desea realizar consultas específicas (opcional)
                </p>
                <div class="resources-grid" id="resourcesGrid">
                    <div class="resource-card" data-resource="manual">
                        <h3>📋 Manual de Convivencia</h3>
                        <p>Normativas, derechos, deberes y procedimientos disciplinarios</p>
                    </div>
                    <div class="resource-card" data-resource="pei">
                        <h3>🎯 Proyecto Educativo Institucional</h3>
                        <p>Misión, visión, filosofía y lineamientos pedagógicos</p>
                    </div>
                    <div class="resource-card" data-resource="calendario">
                        <h3>📅 Calendario Escolar</h3>
                        <p>Cronograma académico, festividades y evaluaciones</p>
                    </div>
                    <div class="resource-card" data-resource="legislacion">
                        <h3>⚖️ Legislación Educativa</h3>
                        <p>Normativas MEN, decretos y resoluciones vigentes</p>
                    </div>
                    <div class="resource-card" data-resource="planes">
                        <h3>📊 Planes de Estudio</h3>
                        <p>Currículos, competencias y metodologías por área</p>
                    </div>
                    <div class="resource-card" data-resource="procedimientos">
                        <h3>🔄 Procedimientos</h3>
                        <p>Procesos administrativos, académicos y de bienestar</p>
                    </div>
                </div>
            </section>

            <!-- ================================================ -->
            <!-- INTERFAZ DE CHAT CON IA -->
            <!-- ================================================ -->
            <section class="chat-section">
                <h2 class="section-title">🤖 Consultor Educativo IA</h2>
                <div class="chat-interface">
                    <!-- Header del chat con estado de conexión -->
                    <div class="chat-header">
                        <span class="status-indicator" id="statusIndicator"></span>
                        <span id="chatStatus">Configurando sistema...</span>
                    </div>
                    
                    <!-- Área de mensajes -->
                    <div class="chat-messages" id="chatMessages">
                        <div class="message assistant">
                            <strong>🤖 Asistente IA:</strong> ¡Bienvenido al Portal Educativo de la Institución María Auxiliadora! 
                            <br><br>
                            Soy su consultor educativo inteligente. Puedo ayudarle con:
                            <br>
                            • 📋 Consultas sobre el Manual de Convivencia
                            <br>
                            • 🎯 Información del PEI y filosofía institucional
                            <br>
                            • 📅 Fechas y eventos del calendario escolar
                            <br>
                            • ⚖️ Normativas y legislación educativa
                            <br>
                            • 📊 Planes de estudio y metodologías
                            <br>
                            • 🔄 Procedimientos administrativos
                            <br>
                            • 💬 Consultas generales sobre educación
                            <br><br>
                            <strong>Para comenzar:</strong>
                            <br>
                            1️⃣ Configure su API Key arriba
                            <br>
                            2️⃣ Realice su consulta (puede seleccionar recursos específicos o hacer preguntas generales)
                        </div>
                    </div>
                    
                    <!-- Área de entrada de texto -->
                    <div class="chat-input-area">
                        <div class="input-container">
                            <textarea 
                                id="chatInput" 
                                class="chat-input" 
                                placeholder="Escriba su consulta sobre los recursos institucionales o cualquier tema educativo..."
                                rows="2"
                            ></textarea>
                            <button id="sendBtn" class="send-btn" onclick="sendMessage()">
                                📤 Enviar
                            </button>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- ================================================ -->
    <!-- ENLACE AL ARCHIVO JAVASCRIPT -->
    <!-- ================================================ -->
    <script src="script.js"></script>
</body>
</html>